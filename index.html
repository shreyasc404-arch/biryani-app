<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Savi Biryani Production System</title>

<style>
body {
    margin:0;
    font-family: Arial, sans-serif;
    background:#111;
    color:white;
    text-align:center;
}

.screen {
    display:none;
    padding:40px;
}

.active {
    display:block;
}

button {
    padding:15px 30px;
    font-size:20px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    margin-top:20px;
}

.primary { background:#28a745; color:white; }
.secondary { background:#007bff; color:white; }

input {
    padding:10px;
    font-size:20px;
    width:150px;
    text-align:center;
}

.step-title {
    font-size:40px;
    margin-bottom:20px;
}

.flame {
    font-size:28px;
    margin:15px 0;
}

.timer {
    font-size:80px;
    margin:20px 0;
}

.ingredients {
    margin-top:20px;
    font-size:22px;
}
</style>
</head>

<body>

<!-- Setup Screen -->
<div id="setup" class="screen active">
    <h1>Savi Biryani Production</h1>
    <h2>Enter Chicken (kg)</h2>
    <input type="number" id="multiplier" value="1" step="0.5">
    <br>
    <button class="primary" onclick="startCooking()">Start Cooking</button>
</div>

<!-- Cooking Screen -->
<div id="cooking" class="screen">
    <div class="step-title" id="stepTitle"></div>
    <div class="flame" id="flameLevel"></div>
    <div class="timer" id="timer"></div>
    <div class="ingredients" id="ingredients"></div>
</div>

<script>

let multiplier = 1;
let currentStep = 0;
let timerInterval;

function scale(value) {
    return (value * multiplier).toFixed(0);
}

function saltScale(value) {
    if(multiplier > 5) return (value * multiplier * 0.95).toFixed(0);
    return (value * multiplier).toFixed(0);
}

function oilScale(value) {
    if(multiplier > 8) return (value * multiplier * 0.92).toFixed(0);
    return (value * multiplier).toFixed(0);
}

function waterScale(riceBase) {
    return (riceBase * multiplier * 1.5).toFixed(0);
}

function getDumTime() {
    if(multiplier <=5) return 20*60;
    if(multiplier <=10) return 25*60;
    if(multiplier <=15) return 30*60;
    return 35*60;
}

function startCooking() {
    multiplier = parseFloat(document.getElementById("multiplier").value);
    document.getElementById("setup").classList.remove("active");
    document.getElementById("cooking").classList.add("active");
    runStep();
}

const steps = [
{
title:"Step 1 - Marination",
flame:"âŒ No Flame",
duration:30*60,
ingredients:()=>`
Chicken: ${scale(1000)} g<br>
Turmeric: ${scale(4)} g<br>
Curd: ${scale(400)} g<br>
Salt: ${saltScale(16)} g<br>
Ginger Garlic Paste: ${scale(64)} g`
},
{
title:"Step 2 - Heat Oil & Whole Spices",
flame:"ðŸ”¥ HIGH",
duration:2*60,
ingredients:()=>`
Oil: ${oilScale(250)} g<br>
Cinnamon, Cardamom, Cloves, Cumin, Star Anise, Bay Leaves`
},
{
title:"Step 3 - Fry Onions",
flame:"ðŸ”¥ HIGH",
duration:15*60,
ingredients:()=>`
Onions: ${scale(500)} g`
},
{
title:"Step 4 - Cook Chicken",
flame:"ðŸ”¥ MEDIUM",
duration:10*60,
ingredients:()=>`Add Marinated Chicken`
},
{
title:"Step 5 - Add Green Paste",
flame:"ðŸ”¥ MEDIUM",
duration:10*60,
ingredients:()=>`
Coriander: ${scale(58)} g<br>
Pudina: ${scale(54)} g<br>
Green Chilli: ${scale(42)} g`
},
{
title:"Step 6 - Add Rice & Water",
flame:"ðŸ”¥ HIGH",
duration:10*60,
ingredients:()=>`
Rice: ${scale(1000)} g<br>
Water: ${waterScale(1000)} g<br>
Salt: ${saltScale(32)} g`
},
{
title:"Step 7 - Dum Cooking",
flame:"ðŸ”¥ LOW (DUM)",
duration:()=>getDumTime(),
ingredients:()=>`Finish with Ghee: ${scale(30)} g`
}
];

function runStep() {

if(currentStep >= steps.length){
    document.getElementById("stepTitle").innerHTML="âœ… BATCH COMPLETE";
    document.getElementById("flameLevel").innerHTML="";
    document.getElementById("ingredients").innerHTML="";
    document.getElementById("timer").innerHTML="";
    return;
}

let step = steps[currentStep];
let duration = typeof step.duration === "function" ? step.duration() : step.duration;

document.getElementById("stepTitle").innerHTML = step.title;
document.getElementById("flameLevel").innerHTML = step.flame;
document.getElementById("ingredients").innerHTML = step.ingredients();

startTimer(duration);
}

function startTimer(duration) {
    let time = duration;

    clearInterval(timerInterval);

    timerInterval = setInterval(function() {
        let minutes = Math.floor(time / 60);
        let seconds = time % 60;
        document.getElementById("timer").innerHTML =
            `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        time--;

        if(time < 0){
            clearInterval(timerInterval);
            currentStep++;
            runStep();
        }
    },1000);
}

</script>
</body>
</html>
